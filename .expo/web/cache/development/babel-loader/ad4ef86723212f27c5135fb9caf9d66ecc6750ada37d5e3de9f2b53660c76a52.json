{"ast":null,"code":"export var defaultOrientation = {\n  pitch: 0,\n  roll: 0,\n  yaw: 0\n};\nvar clamp = function clamp(value, min, max) {\n  return Math.min(Math.max(value, min), max);\n};\nexport var radToDeg = function radToDeg(rad) {\n  return rad * 180 / Math.PI;\n};\nexport var calculateOrientationFromAccelerometer = function calculateOrientationFromAccelerometer(x, y, z) {\n  var pitch = radToDeg(Math.atan2(-x, Math.sqrt(y * y + z * z)));\n  var roll = radToDeg(Math.atan2(y, z));\n  var yaw = radToDeg(Math.atan2(x, y));\n  return {\n    pitch: pitch,\n    roll: roll,\n    yaw: yaw\n  };\n};\nexport var getAlignmentScore = function getAlignmentScore(orientation, config) {\n  var pitchDelta = Math.abs(orientation.pitch - config.targetPitch);\n  var rollDelta = Math.abs(orientation.roll - config.targetRoll);\n  var yawDelta = Math.abs(orientation.yaw - config.targetYaw);\n  var normalizedPitch = 1 - clamp(pitchDelta / 25, 0, 1);\n  var normalizedRoll = 1 - clamp(rollDelta / 25, 0, 1);\n  var normalizedYaw = 1 - clamp(yawDelta / 25, 0, 1);\n  var score = (normalizedPitch + normalizedRoll + normalizedYaw) / 3;\n  return Number(score.toFixed(2));\n};\nexport var describeAlignment = function describeAlignment(score) {\n  if (score > 0.9) {\n    return 'locked';\n  }\n  if (score > 0.75) {\n    return 'almost';\n  }\n  if (score > 0.5) {\n    return 'adjust';\n  }\n  return 'far';\n};","map":{"version":3,"names":["defaultOrientation","pitch","roll","yaw","clamp","value","min","max","Math","radToDeg","rad","PI","calculateOrientationFromAccelerometer","x","y","z","atan2","sqrt","getAlignmentScore","orientation","config","pitchDelta","abs","targetPitch","rollDelta","targetRoll","yawDelta","targetYaw","normalizedPitch","normalizedRoll","normalizedYaw","score","Number","toFixed","describeAlignment"],"sources":["/Users/dogaulku/Desktop/metusnew/Motus/src/utils/orientation.ts"],"sourcesContent":["import { AngleConfig } from '@types';\n\nexport interface Orientation {\n  pitch: number;\n  roll: number;\n  yaw: number;\n}\n\nexport const defaultOrientation: Orientation = {\n  pitch: 0,\n  roll: 0,\n  yaw: 0\n};\n\nconst clamp = (value: number, min: number, max: number) => Math.min(Math.max(value, min), max);\n\nexport const radToDeg = (rad: number) => (rad * 180) / Math.PI;\n\nexport const calculateOrientationFromAccelerometer = (x: number, y: number, z: number): Orientation => {\n  const pitch = radToDeg(Math.atan2(-x, Math.sqrt(y * y + z * z)));\n  const roll = radToDeg(Math.atan2(y, z));\n  const yaw = radToDeg(Math.atan2(x, y));\n  return { pitch, roll, yaw };\n};\n\nexport const getAlignmentScore = (orientation: Orientation, config: AngleConfig): number => {\n  const pitchDelta = Math.abs(orientation.pitch - config.targetPitch);\n  const rollDelta = Math.abs(orientation.roll - config.targetRoll);\n  const yawDelta = Math.abs(orientation.yaw - config.targetYaw);\n  const normalizedPitch = 1 - clamp(pitchDelta / 25, 0, 1);\n  const normalizedRoll = 1 - clamp(rollDelta / 25, 0, 1);\n  const normalizedYaw = 1 - clamp(yawDelta / 25, 0, 1);\n  const score = (normalizedPitch + normalizedRoll + normalizedYaw) / 3;\n  return Number(score.toFixed(2));\n};\n\nexport const describeAlignment = (score: number) => {\n  if (score > 0.9) {\n    return 'locked';\n  }\n  if (score > 0.75) {\n    return 'almost';\n  }\n  if (score > 0.5) {\n    return 'adjust';\n  }\n  return 'far';\n};\n"],"mappings":"AAQA,OAAO,IAAMA,kBAA+B,GAAG;EAC7CC,KAAK,EAAE,CAAC;EACRC,IAAI,EAAE,CAAC;EACPC,GAAG,EAAE;AACP,CAAC;AAED,IAAMC,KAAK,GAAG,SAARA,KAAKA,CAAIC,KAAa,EAAEC,GAAW,EAAEC,GAAW;EAAA,OAAKC,IAAI,CAACF,GAAG,CAACE,IAAI,CAACD,GAAG,CAACF,KAAK,EAAEC,GAAG,CAAC,EAAEC,GAAG,CAAC;AAAA;AAE9F,OAAO,IAAME,QAAQ,GAAG,SAAXA,QAAQA,CAAIC,GAAW;EAAA,OAAMA,GAAG,GAAG,GAAG,GAAIF,IAAI,CAACG,EAAE;AAAA;AAE9D,OAAO,IAAMC,qCAAqC,GAAG,SAAxCA,qCAAqCA,CAAIC,CAAS,EAAEC,CAAS,EAAEC,CAAS,EAAkB;EACrG,IAAMd,KAAK,GAAGQ,QAAQ,CAACD,IAAI,CAACQ,KAAK,CAAC,CAACH,CAAC,EAAEL,IAAI,CAACS,IAAI,CAACH,CAAC,GAAGA,CAAC,GAAGC,CAAC,GAAGA,CAAC,CAAC,CAAC,CAAC;EAChE,IAAMb,IAAI,GAAGO,QAAQ,CAACD,IAAI,CAACQ,KAAK,CAACF,CAAC,EAAEC,CAAC,CAAC,CAAC;EACvC,IAAMZ,GAAG,GAAGM,QAAQ,CAACD,IAAI,CAACQ,KAAK,CAACH,CAAC,EAAEC,CAAC,CAAC,CAAC;EACtC,OAAO;IAAEb,KAAK,EAALA,KAAK;IAAEC,IAAI,EAAJA,IAAI;IAAEC,GAAG,EAAHA;EAAI,CAAC;AAC7B,CAAC;AAED,OAAO,IAAMe,iBAAiB,GAAG,SAApBA,iBAAiBA,CAAIC,WAAwB,EAAEC,MAAmB,EAAa;EAC1F,IAAMC,UAAU,GAAGb,IAAI,CAACc,GAAG,CAACH,WAAW,CAAClB,KAAK,GAAGmB,MAAM,CAACG,WAAW,CAAC;EACnE,IAAMC,SAAS,GAAGhB,IAAI,CAACc,GAAG,CAACH,WAAW,CAACjB,IAAI,GAAGkB,MAAM,CAACK,UAAU,CAAC;EAChE,IAAMC,QAAQ,GAAGlB,IAAI,CAACc,GAAG,CAACH,WAAW,CAAChB,GAAG,GAAGiB,MAAM,CAACO,SAAS,CAAC;EAC7D,IAAMC,eAAe,GAAG,CAAC,GAAGxB,KAAK,CAACiB,UAAU,GAAG,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC;EACxD,IAAMQ,cAAc,GAAG,CAAC,GAAGzB,KAAK,CAACoB,SAAS,GAAG,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC;EACtD,IAAMM,aAAa,GAAG,CAAC,GAAG1B,KAAK,CAACsB,QAAQ,GAAG,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC;EACpD,IAAMK,KAAK,GAAG,CAACH,eAAe,GAAGC,cAAc,GAAGC,aAAa,IAAI,CAAC;EACpE,OAAOE,MAAM,CAACD,KAAK,CAACE,OAAO,CAAC,CAAC,CAAC,CAAC;AACjC,CAAC;AAED,OAAO,IAAMC,iBAAiB,GAAG,SAApBA,iBAAiBA,CAAIH,KAAa,EAAK;EAClD,IAAIA,KAAK,GAAG,GAAG,EAAE;IACf,OAAO,QAAQ;EACjB;EACA,IAAIA,KAAK,GAAG,IAAI,EAAE;IAChB,OAAO,QAAQ;EACjB;EACA,IAAIA,KAAK,GAAG,GAAG,EAAE;IACf,OAAO,QAAQ;EACjB;EACA,OAAO,KAAK;AACd,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}